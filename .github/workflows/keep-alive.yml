name: keep-render-awake

on:
  schedule:
    - cron: "*/10 * * * *"   # runs every 10 minutes
  workflow_dispatch:          # lets you trigger manually too

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render service only during 09:13–16:00 IST
        run: |
          now=$(date -u +%H%M)   # current UTC time (HHMM)
          # IST = UTC+5:30
          # Market hours = 09:13–16:00 IST = 03:43–10:30 UTC
          if [[ "$now" > "0343" && "$now" < "1030" ]]; then
            curl -fsS https://your-app.onrender.com/health || true
          else
            echo "⏸️ Outside market hours ($now UTC) - no ping sent"
          fi
